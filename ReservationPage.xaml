<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PensiuneApp2.ReservationPage"
             Title="Rezervare Nouă">

    <Grid RowDefinitions="Auto, *, Auto" 
          Padding="20" 
          RowSpacing="10">

        <ScrollView Grid.Row="0">
            <StackLayout Spacing="10">
                <Label Text="Selectează Clientul:" FontAttributes="Bold" />
                <Picker x:Name="ClientPicker" Title="Alege un client din listă" BackgroundColor="#f0f0f0" />

                <Label Text="Selectează Camera:" FontAttributes="Bold" />
                <Picker x:Name="RoomPicker" Title="Alege o cameră" BackgroundColor="#f0f0f0" />

                <Label Text="Data Check-In:" FontAttributes="Bold" />
                <DatePicker Date="{Binding CheckIn}" Format="dd/MM/yyyy" />

                <Label Text="Data Check-Out:" FontAttributes="Bold" />
                <DatePicker Date="{Binding CheckOut}" Format="dd/MM/yyyy" />

                <Button Text="Salvează Rezervarea" 
                        Clicked="OnSaveButtonClicked" 
                        BackgroundColor="Green" 
                        TextColor="White" 
                        Margin="0,10,0,0" />
            </StackLayout>
        </ScrollView>

        <ListView Grid.Row="1" 
                  x:Name="listViewReservations" 
                  ItemSelected="OnReservationSelected" 
                  HasUnevenRows="True"
                  Margin="0,10,0,0">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <Frame BorderColor="Gray" CornerRadius="5" Padding="10" Margin="0,5">
                            <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="*, *">
                                <Label Grid.Row="0" Grid.Column="0" 
                                       Text="{Binding Client.NumeComplet}" 
                                       FontAttributes="Bold" 
                                       TextColor="Black" />

                                <Label Grid.Row="0" Grid.Column="1" 
                                       Text="{Binding Room.RoomNumber, StringFormat='Camera: {0}'}" 
                                       HorizontalOptions="End" 
                                       TextColor="Blue"/>

                                <Label Grid.Row="1" Grid.Column="0" 
                                       Text="{Binding CheckIn, StringFormat='In: {0:dd/MM/yyyy}'}" 
                                       FontSize="Small" />

                                <Label Grid.Row="1" Grid.Column="1" 
                                       Text="{Binding CheckOut, StringFormat='Out: {0:dd/MM/yyyy}'}" 
                                       HorizontalOptions="End" 
                                       FontSize="Small" />
                            </Grid>
                        </Frame>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Button Grid.Row="2" 
                Text="Șterge Rezervare" 
                Clicked="OnDeleteButtonClicked" 
                BackgroundColor="Red" 
                TextColor="White"
                Margin="0,5,0,0"/>

    </Grid>
</ContentPage>